"use strict";!function($,window){var ClassVariable;return ClassVariable=function(){function ProjectDetail(){}var utils=QamineUtils.getInstance(),sockets=Sockets.getInstance(),COMMIT_LIST="#commit-list";ProjectDetail.prototype.bindBranchesDropDown=function(){var searchBox=$(".jsSearchBranch"),searchBoxInput=searchBox.find("input");$(".jsDropdown").click(function(){setTimeout(function(){searchBoxInput.focus()},200)}),searchBox.on("click",function(e){e.stopPropagation()}),searchBox.on("keyup",function(){var searchText=searchBoxInput.val();$(".jsDropdownBranch > li:not(:first)").each(function(){var branchName=$(this).find(".jsBranchName").text();branchName.toLowerCase().search(searchText.toLowerCase())>-1?$(this).show():$(this).hide()});var nrShownBranches=$(".jsDropdownBranch > :not(:hidden)").length,noMatchesLabel=$(".jsBranchNoMatch");nrShownBranches>1?noMatchesLabel.hide():noMatchesLabel.show()})},ProjectDetail.prototype.disableMenu=function(){$(".panel-tabs.disabled a").click(function(){return!1})},ProjectDetail.prototype.bindIgnoreFile=function(projectId,filename,branchId,forceRedirect){var onSuccess=function(response){forceRedirect===!0&&response.ignoreFileRedirect?window.location=response.ignoreFileRedirect:window.location.reload()},onError=function(){};$(".BtnIgnoreFile").click(function(){var ignoreUrl=$(this).data("url"),postIgnore={};postIgnore.projectId=projectId,postIgnore.file=filename,postIgnore.branchId=branchId,utils.post(ignoreUrl,postIgnore,onSuccess,onError)}),$(".BtnUnignoreFile").click(function(e){e.preventDefault();var unignoreUrl=$(this).attr("href"),postUnignore={};postUnignore.projectId=projectId,postUnignore.file=filename,utils.post(unignoreUrl,postUnignore,onSuccess,onError)})},ProjectDetail.prototype.bindLoadMore=function(globalContainer,offsetSelector,onComplete){var updateOffset=function(){var $infiniteLink=$(".infinite-more-link"),offset=$(offsetSelector).length,url=$infiniteLink.attr("href").replace("-1",offset),queryString=-1===url.indexOf("?")?window.location.search:window.location.search.substring(1);$infiniteLink.attr("href",url+"&"+queryString),onComplete&&onComplete()};updateOffset(),$(globalContainer).waypoint("infinite",{container:".infinite-container",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:$.noop,onAfterPageLoad:updateOffset})},sockets.CommitUpdate=function(data){var branchSpec=$("#branchSpec");if(branchSpec){var currentBranchId=branchSpec.data("id"),eventBranchId=parseInt(data.message,10),isAnalysing=$(".analysing-container");isAnalysing.length&&currentBranchId===eventBranchId?window.location.reload():sockets.AlgorithmUpdate(data)}},sockets.AlgorithmUpdate=function(data){var commitId=data.targetModelId,commitElems=$(COMMIT_LIST+" li ");if(commitElems.length){var url=$(COMMIT_LIST).data("url").replace(-1,commitId);utils.request(url,function(result){var commitElement=$("#commit-"+commitId);commitElement&&commitElement.replaceWith($(result))})}};var instance;return{getInstance:function(){return void 0===instance&&(instance=new ProjectDetail,instance.constructor=null),instance}}}(),window.ProjectDetail=ClassVariable,window.ProjectDetail}(jQuery,window);
//# sourceMappingURL=project-detail.min.js.map